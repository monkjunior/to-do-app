(this["webpackJsonpto-do-app"]=this["webpackJsonpto-do-app"]||[]).push([[0],{19:function(e,t,a){e.exports=a(37)},24:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(18),i=a.n(l),c=(a(24),a(6)),s=a(7),r=a(8),d=a(9),m=a(14);a(34);m.initializeApp({apiKey:"AIzaSyC-podzmrb-krx-HDycqENO4fiElXgbR6g",authDomain:"vungocson998.github.io/to-do-app",databaseURL:"https://to-do-app-13683.firebaseio.com",projectId:"to-do-app-13683",storageBucket:"gs://to-do-app-13683.appspot.com",messagingSenderId:"Son Vu | To do app"});var u=m,h=(a(35),a(4)),k=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).ref=u.firestore().collection("tasks"),n.log=u.firestore().collection("done"),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.handleDblClick=n.handleDblClick.bind(Object(h.a)(n)),n.delete=n.delete.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"handleClick",value:function(e){var t=e.currentTarget.id.toString();this.makeUnDone(t)}},{key:"handleDblClick",value:function(e){var t=e.currentTarget.id.toString();this.delete(t)}},{key:"delete",value:function(e){this.log.doc(e).delete().then((function(){console.log("DONE COLLECTION: Document successfully deleted!")})).catch((function(e){console.error("DONE COLLECTION: Error in deleting document: ",e)}))}},{key:"makeUnDone",value:function(e){var t=this;this.log.doc(e).get().then((function(a){if(a.exists){var n=a.data(),o=n.name,l=n.detail,i=n.time,c=n.id,s=new Date;c=s.getTime().toString(),i="".concat(s.toLocaleDateString(),"  |  ").concat(s.toLocaleTimeString()),t.ref.doc(c).set({id:c,name:o,detail:l,time:i}),console.log("DONE COLLECTION  --\x3e TASKS COLLECTION : UnDone",a.data()),t.delete(e)}else console.log("DONE COLLECTION  --\x3e TASKS COLLECTION : Error")})).catch((function(e){console.error("DONE COLLECTION: Error moving document: ",e)}))}},{key:"render",value:function(){return o.a.createElement("li",{className:"task",id:this.props.id,onDoubleClick:this.handleDblClick,onClick:this.handleClick},o.a.createElement("div",{className:"task-line"},o.a.createElement("div",{className:"task-line-node"}),o.a.createElement("div",{className:"task-line-tail"})),o.a.createElement("div",{className:"task-content"},o.a.createElement("div",{className:"task-name"},this.props.name),o.a.createElement("div",{className:"task-detail"},o.a.createElement("p",null,this.props.detail)),o.a.createElement("div",{className:"task-time"},this.props.time)))}}]),a}(n.Component);var p=function(e){var t=e.tasks;console.log("Done "+e);var a=t.map((function(e){return o.a.createElement(k,{name:e.name,detail:e.detail,time:e.time,id:e.id,key:e.id})}));return o.a.createElement("div",{className:"activity"},o.a.createElement("div",{className:"activity-title"},"Log"),o.a.createElement("span",null," Click to undone task | Double click to delete task"),o.a.createElement("ul",{className:"donetask-wrapper"},o.a.createElement("div",{className:"task-wrapper-space"},a.reverse())))},v=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).ref=u.firestore().collection("tasks"),n.log=u.firestore().collection("done"),n.handleClick=n.handleClick.bind(Object(h.a)(n)),n.handleDblClick=n.handleDblClick.bind(Object(h.a)(n)),n.delete=n.delete.bind(Object(h.a)(n)),n.makeDone=n.makeDone.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"handleClick",value:function(e){var t=e.currentTarget.id.toString();this.makeDone(t)}},{key:"handleDblClick",value:function(e){var t=e.currentTarget.id.toString();this.delete(t)}},{key:"delete",value:function(e){this.ref.doc(e).delete().then((function(){console.log("TASKS COLLECTION:Document successfully deleted!")})).catch((function(e){console.error("TASKS COLLECTION: Error in deleting document: ",e)}))}},{key:"makeDone",value:function(e){var t=this;this.ref.doc(e).get().then((function(a){if(a.exists){var n=a.data(),o=n.name,l=n.detail,i=n.time,c=n.id,s=new Date;c=s.getTime().toString(),i="".concat(s.toLocaleDateString(),"  |  ").concat(s.toLocaleTimeString()),t.log.doc(c).set({id:c,name:o,detail:l,time:i}),console.log("TASKS COLLECTION --\x3e DONE COLLECTION : Done",a.data()),t.delete(e)}else console.log("TASKS COLLECTION --\x3e DONE COLLECTION : Error")})).catch((function(e){console.error("TASKS COLLECTION: Error moving document: ",e)}))}},{key:"render",value:function(){return o.a.createElement("li",{className:"task",id:this.props.id,onDoubleClick:this.handleDblClick,onClick:this.handleClick},o.a.createElement("div",{className:"task-line"},o.a.createElement("div",{className:"task-line-node"}),o.a.createElement("div",{className:"task-line-tail"})),o.a.createElement("div",{className:"task-content"},o.a.createElement("div",{className:"task-name"},this.props.name),o.a.createElement("div",{className:"task-detail"},o.a.createElement("p",null,this.props.detail)),o.a.createElement("div",{className:"task-time"},this.props.time)))}}]),a}(n.Component),E=(a(36),function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleAdd=function(e){e.preventDefault();var t=document.getElementById("task-name").value;if(""!==t){console.log("start");var a=document.getElementById("task-detail").value,n=new Date,o=n.getTime(),l="".concat(n.toLocaleDateString(),"  |  ").concat(n.toLocaleTimeString());console.log(n),this.ref.doc(o.toString()).set({id:o,name:t,detail:a,time:l}).then((function(e){console.log("Adding Document Successfully")})).catch((function(e){console.log("Adding Error"+e)}))}},n.handleDel=function(e){e.preventDefault(),console.log("Handle Del")},n.ref=u.firestore().collection("tasks"),n.handleAdd=n.handleAdd.bind(Object(h.a)(n)),n.handleDel=n.handleDel.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("form",null,o.a.createElement("input",{type:"text",placeholder:"Task name",id:"task-name"}),o.a.createElement("textarea",{name:"",id:"task-detail",cols:"1",rows:"1",placeholder:"Detail ..."}),o.a.createElement("div",{className:"button-wrapper"},o.a.createElement("button",{type:"submit",id:"add-button",onClick:this.handleAdd},"Add"),o.a.createElement("button",{type:"submit",id:"delete-button",onClick:this.handleDel},"Delete")))}}]),a}(n.Component));var f=function(e){var t=e.tasks;console.log("To do "+e);var a=t.map((function(e){return o.a.createElement(v,{name:e.name,detail:e.detail,time:e.time,id:e.id,key:e.id})}));return o.a.createElement("div",{className:"to-do"},o.a.createElement("div",{className:"to-do-title"},"To do list"),o.a.createElement("span",null," Click to done task | Double click to delete task"),o.a.createElement(E,null),o.a.createElement("ul",{className:"task-wrapper"},o.a.createElement("div",{className:"task-wrapper-space"},a.reverse())))},g=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onToDoCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,o=a.detail,l=a.time,i=a.id;console.log(e.data()),console.log(n),t.push({id:i,task:e,detail:o,name:n,time:l})})),n.setState({tasks:t}),console.log(n.state.tasks[0])},n.onDoneCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,o=a.detail,l=a.time,i=a.id;console.log(e.data()),console.log(n),t.push({id:i,task:e,detail:o,name:n,time:l})})),n.setState({done:t}),console.log(n.state.done[0])},n.ref=u.firestore().collection("tasks"),n.log=u.firestore().collection("done"),n.unsubscribe=null,n.state={tasks:[],done:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onToDoCollectionUpdate),this.unsubscribe=this.log.onSnapshot(this.onDoneCollectionUpdate)}},{key:"render",value:function(){return o.a.createElement("div",{className:"main"},o.a.createElement(f,{tasks:this.state.tasks}),o.a.createElement(p,{tasks:this.state.done}))}}]),a}(n.Component);var b=function(e){return o.a.createElement("div",{className:"App"},o.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.ae762198.chunk.js.map